import{a as F,b as L,c as P,V as A}from"./VOverlay-a17eb942.js";import{f as I}from"./forwardRefs-e2994a01.js";import{x as O,a as E,m as V,cg as C,s as B,bJ as x,ci as K,bN as D,cj as q,bI as R,v as U,y as j,z as N,A as T,i as J,aE as W,a8 as X,aA as Y,a7 as z,B as H,as as G,aJ as Q,aL as M,ck as Z,bW as S}from"./index-fa2d734a.js";const _=B({target:Object},"v-dialog-transition"),ee=O()({name:"VDialogTransition",props:_(),setup(i,m){let{slots:e}=m;const s={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,p){var v;await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),t.style.visibility="";const{x:d,y:a,sx:n,sy:u,speed:f}=k(i.target,t),y=x(t,[{transform:`translate(${d}px, ${a}px) scale(${n}, ${u})`,opacity:0},{}],{duration:225*f,easing:K});(v=$(t))==null||v.forEach(l=>{x(l,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*f,easing:D})}),y.finished.then(()=>p())},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,p){var v;await new Promise(l=>requestAnimationFrame(l));const{x:d,y:a,sx:n,sy:u,speed:f}=k(i.target,t);x(t,[{},{transform:`translate(${d}px, ${a}px) scale(${n}, ${u})`,opacity:0}],{duration:125*f,easing:q}).finished.then(()=>p()),(v=$(t))==null||v.forEach(l=>{x(l,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*f,easing:D})})},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>i.target?E(C,V({name:"dialog-transition"},s,{css:!1}),e):E(C,{name:"dialog-transition"},e)}});function $(i){var e;const m=(e=i.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:e.children;return m&&[...m]}function k(i,m){const e=i.getBoundingClientRect(),s=R(m),[t,p]=getComputedStyle(m).transformOrigin.split(" ").map(c=>parseFloat(c)),[d,a]=getComputedStyle(m).getPropertyValue("--v-overlay-anchor-origin").split(" ");let n=e.left+e.width/2;d==="left"||a==="left"?n-=e.width/2:(d==="right"||a==="right")&&(n+=e.width/2);let u=e.top+e.height/2;d==="top"||a==="top"?u-=e.height/2:(d==="bottom"||a==="bottom")&&(u+=e.height/2);const f=e.width/s.width,y=e.height/s.height,v=Math.max(1,f,y),l=f/v||0,b=y/v||0,o=s.width*s.height/(window.innerWidth*window.innerHeight),r=o>.12?Math.min(1.5,(o-.12)*10+1):1;return{x:n-(t+s.left),y:u-(p+s.top),sx:l,sy:b,speed:r}}const te=B({id:String,...U(F({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ee}}),["absolute"])},"VMenu"),ie=O()({name:"VMenu",props:te(),emits:{"update:modelValue":i=>!0},setup(i,m){let{slots:e}=m;const s=j(i,"modelValue"),{scopeId:t}=L(),p=N(),d=T(()=>i.id||`v-menu-${p}`),a=J(),n=W(P,null),u=X(0);Y(P,{register(){++u.value},unregister(){--u.value},closeParents(){setTimeout(()=>{u.value||(s.value=!1,n==null||n.closeParents())},40)}});async function f(o){var g,h,w;const r=o.relatedTarget,c=o.target;await Q(),s.value&&r!==c&&((g=a.value)!=null&&g.contentEl)&&((h=a.value)!=null&&h.globalTop)&&![document,a.value.contentEl].includes(c)&&!a.value.contentEl.contains(c)&&((w=M(a.value.contentEl)[0])==null||w.focus())}z(s,o=>{o?(n==null||n.register(),document.addEventListener("focusin",f,{once:!0})):(n==null||n.unregister(),document.removeEventListener("focusin",f))});function y(){n==null||n.closeParents()}function v(o){var r,c,g;i.disabled||o.key==="Tab"&&(Z(M((r=a.value)==null?void 0:r.contentEl,!1),o.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(s.value=!1,(g=(c=a.value)==null?void 0:c.activatorEl)==null||g.focus()))}function l(o){var c;if(i.disabled)return;const r=(c=a.value)==null?void 0:c.contentEl;r&&s.value?o.key==="ArrowDown"?(o.preventDefault(),S(r,"next")):o.key==="ArrowUp"&&(o.preventDefault(),S(r,"prev")):["ArrowDown","ArrowUp"].includes(o.key)&&(s.value=!0,o.preventDefault(),setTimeout(()=>setTimeout(()=>l(o))))}const b=T(()=>V({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-owns":d.value,onKeydown:l},i.activatorProps));return H(()=>{const[o]=A.filterProps(i);return E(A,V({ref:a,class:["v-menu",i.class],style:i.style},o,{modelValue:s.value,"onUpdate:modelValue":r=>s.value=r,absolute:!0,activatorProps:b.value,"onClick:outside":y,onKeydown:v},t),{activator:e.activator,default:function(){for(var r=arguments.length,c=new Array(r),g=0;g<r;g++)c[g]=arguments[g];return E(G,{root:"VMenu"},{default:()=>{var h;return[(h=e.default)==null?void 0:h.call(e,...c)]}})}})}),I({id:d,Î¨openChildren:u},a)}});export{ee as V,ie as a};
